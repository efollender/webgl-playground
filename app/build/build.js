(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

let animation,
    helpers = [],
    mixers = [],
    pushed = false;
let clock = new THREE.Clock();
let ready = false;
class Demo {
	constructor() {
		this.ms_Canvas = null;
		this.ms_Renderer = null;
		this.ms_Camera = null;
		this.ms_Scene = null;
		this.ms_Controls = null;
		this.ms_Water = null;
		this.ms_Raycaster = null;
		this.ms_Clickable = [];
	}
	enable() {
		try {
			var aCanvas = document.createElement('canvas');
			return !!window.WebGLRenderingContext && (aCanvas.getContext('webgl') || aCanvas.getContext('experimental-webgl'));
		} catch (e) {
			return false;
		}
	}
	initialize(inIdCanvas, inParameters) {
		this.ms_Canvas = $('#' + inIdCanvas);

		// Initialize Renderer, Camera, Projector and Scene
		this.ms_Renderer = this.enable ? new THREE.WebGLRenderer({ antialias: true }) : new THREE.CanvasRenderer();
		this.ms_Canvas.html(this.ms_Renderer.domElement);
		this.ms_Scene = new THREE.Scene();

		this.ms_Camera = new THREE.PerspectiveCamera(55.0, WINDOW.ms_Width / WINDOW.ms_Height, 0.5, 3000000);
		this.ms_Camera.position.set(0, -Math.max(inParameters.width * 1.5, inParameters.height) / 8, inParameters.height);
		this.ms_Camera.lookAt(new THREE.Vector3(0, 0, 0));

		this.ms_Raycaster = new THREE.Raycaster();

		// Initialize Orbit control		
		this.ms_Controls = new THREE.OrbitControls(this.ms_Camera, this.ms_Renderer.domElement);
		this.ms_Controls.userPan = false;
		this.ms_Controls.userPanSpeed = 0.0;
		this.ms_Controls.maxDistance = 4000.0;
		this.ms_Controls.enableKeys = false;
		this.ms_Controls.maxPolarAngle = Math.PI * .495;

		// Add light

		var ambient = new THREE.AmbientLight(0x888888);
		this.ms_Scene.add(ambient);
		//Left Light
		var directionalLight = new THREE.DirectionalLight(0x888888, .9);
		directionalLight.position.set(-600, 300, 600);
		this.ms_Scene.add(directionalLight);
		//Right light
		var directionalLight2 = new THREE.DirectionalLight(0x888888, .8);
		directionalLight2.position.set(600, 800, 600);
		this.ms_Scene.add(directionalLight2);
		//Bottom Light
		var directionalLight3 = new THREE.DirectionalLight(0x888888, .15);
		directionalLight3.position.set(0, 0, 1000);
		this.ms_Scene.add(directionalLight3);
		//Back Light
		var directionalLight4 = new THREE.DirectionalLight(0x77D0FF, .5);
		directionalLight4.position.set(0, 600, -600);
		this.ms_Scene.add(directionalLight4);

		// Create terrain
		this.loadTerrain(inParameters);

		// Load textures		
		var waterNormals = new THREE.ImageUtils.loadTexture('../assets/img/waternormals.jpg');
		waterNormals.wrapS = waterNormals.wrapT = THREE.SphericalReflectionMapping;

		// Create the water effect
		this.ms_Water = new THREE.Water(this.ms_Renderer, this.ms_Camera, this.ms_Scene, {
			textureWidth: 512,
			textureHeight: 512,
			waterNormals: waterNormals,
			alpha: 1.0,
			sunDirection: directionalLight.position.normalize(),
			sunColor: 0xFFFFFF,
			waterColor: 0x8F81A1,
			distortionScale: 20.0
		});
		var aMeshMirror = new THREE.Mesh(new THREE.PlaneBufferGeometry(inParameters.width * 500, inParameters.height * 500, 10, 10), this.ms_Water.material);
		aMeshMirror.add(this.ms_Water);
		aMeshMirror.rotation.x = -Math.PI * 0.5;
		this.ms_Scene.add(aMeshMirror);

		//Load objects	
		this.loadSkyBox();
		this.loadGlaciers();
		this.loadIce();
		this.loadCat();

		//Listen for trigger
		const buttons = document.getElementsByClassName('trigger');
		[].slice.call(buttons).forEach(button => {
			button.addEventListener('click', event => {
				this.handleButton();
			});
		});
		this.handleKeyDown();

		//Audio
		var audio = document.createElement('audio');
		var source = document.createElement('source');
		source.src = 'assets/sounds/sleep.mp3';
		audio.loop = true;
		audio.appendChild(source);
		// audio.play();

		//allow zoom
		setTimeout(() => {
			ready = true;
		}, 10000);
	}
	loadSkyBox() {
		var skyTexture = THREE.ImageUtils.loadTexture('assets/img/gradient_03.jpg');
		// skyTexture.wrapS = skyTexture.wrapT = THREE.RepeatWrapping;

		// var aSkyBoxMaterial = new THREE.ShaderMaterial({
		//   fragmentShader: aShader.fragmentShader,
		//   vertexShader: aShader.vertexShader,
		//   uniforms: aShader.uniforms,
		//   depthWrite: false,
		//   side: THREE.BackSide
		// });

		var aSkybox = new THREE.Mesh(new THREE.SphereGeometry(10000, 32, 32), new THREE.MeshPhongMaterial({
			map: skyTexture,
			side: THREE.BackSide,
			vertexColors: THREE.FaceColors,
			shading: THREE.SmoothShading
		}));

		this.ms_Scene.add(aSkybox);
	}
	loadTerrain(inParameters) {
		var terrainGeo = TERRAINGEN.Get(inParameters);
		var iceTexture = THREE.ImageUtils.loadTexture('assets/img/texture_001.jpg');
		var terrainMaterial = new THREE.MeshPhongMaterial({ map: iceTexture, shading: THREE.FlatShading, side: THREE.DoubleSide });
		terrainMaterial.color = new THREE.Color(0xCCCCEE);
		var terrain = new THREE.Mesh(terrainGeo, terrainMaterial);
		terrain.position.y = -inParameters.depth * 0.5;
		terrain.position.z = -4000;
		this.ms_Scene.add(terrain);
	}
	loadGlaciers() {
		var objLoader = new THREE.OBJLoader();
		var ms_Scene = this.ms_Scene;
		var iceTexture = THREE.ImageUtils.loadTexture('assets/img/texture_001.jpg');
		objLoader.load('assets/landscape_assets/glacier_01.obj', function (glacier) {

			//load ice texture
			for (var i = 0; i < glacier.children.length; i++) {
				glacier.children[i].material = new THREE.MeshPhongMaterial({
					map: iceTexture,
					specularMap: iceTexture,
					shading: THREE.SmoothShading
				});
			}

			glacier.position.z = 1000;
			glacier.position.x = 200;
			glacier.scale.set(.1, .1, .1);
			ms_Scene.add(glacier);
		});
		objLoader.load('assets/landscape_assets/glacier_02.obj', function (glacier) {

			//load ice texture
			for (var i = 0; i < glacier.children.length; i++) {
				glacier.children[i].material = new THREE.MeshPhongMaterial({
					map: iceTexture,
					specularMap: iceTexture,
					shading: THREE.SmoothShading
				});
			}

			glacier.position.z = 900;
			glacier.position.x = -1000;
			glacier.scale.set(.2, .2, .2);
			ms_Scene.add(glacier);
		});
	}
	loadIce() {
		const objLoader = new THREE.OBJLoader();
		const ms_Scene = this.ms_Scene;
		const iceTexture = THREE.ImageUtils.loadTexture('assets/img/texture_001.jpg');
		objLoader.load('assets/landscape_assets/floe_01.obj', function (glacier) {
			//load ice texture
			for (var i = 0; i < glacier.children.length; i++) {
				glacier.children[i].material = new THREE.MeshPhongMaterial({
					map: iceTexture,
					specularMap: iceTexture,
					shading: THREE.SmoothShading
				});
			}

			glacier.position.z = 1000;
			glacier.position.x = 0;
			// glacier.scale.set(.1,.1,.1);
			ms_Scene.add(glacier);
		});
	}
	loadCat() {
		var jsonLoader = new THREE.JSONLoader();
		var ms_Scene = this.ms_Scene;
		var loadAnimation = this.loadAnimation;

		jsonLoader.load("assets/js/cat_animated.js", function (geometry, materials) {
			loadAnimation(geometry, materials, 0, 10, 1000, 15, ms_Scene, "assets/img/cat_diffuse.jpg");
		});
		jsonLoader.load("assets/js/cat_animated_hat.js", function (geometry, materials) {
			loadAnimation(geometry, materials, 0, 10, 1000, 15, ms_Scene, "assets/img/hat_diffuse.jpg");
		});
	}
	loadAnimation(geometry, materials, x, y, z, s, scene, texture) {
		let mixer;
		const objTexture = THREE.ImageUtils.loadTexture(texture);
		geometry.computeFaceNormals();
		geometry.computeVertexNormals();
		geometry.dynamic = true;
		geometry.__dirtyVertices = true;
		geometry.__dirtyNormals = true;

		//Flip normals
		for (var i = 0; i < geometry.faces.length; i++) {
			geometry.faces[i].normal.x = -1 * geometry.faces[i].normal.x;
			geometry.faces[i].normal.y = -1 * geometry.faces[i].normal.y;
			geometry.faces[i].normal.z = -1 * geometry.faces[i].normal.z;
		}

		for (let i = 0; i < materials.length; i++) {
			let m = materials[i];
			m.skinning = true;
			m.shading = THREE.SmoothShading;
			m.shininess = 100;
			m.map = objTexture;
		}

		let cat_mesh = new THREE.SkinnedMesh(geometry, new THREE.MeshFaceMaterial(materials));
		cat_mesh.position.set(x, y, z);
		cat_mesh.scale.set(s, s, s);
		cat_mesh.castShadow = true;
		cat_mesh.receiveShadow = true;
		scene.add(cat_mesh);

		let clipMorpher = THREE.AnimationClip.CreateFromMorphTargetSequence('Action', cat_mesh.geometry.morphTargets, 3);
		let clipBones = geometry.animations[0];
		let boneAction = new THREE.AnimationAction(clipBones);
		boneAction.loop = THREE.LoopOnce;
		boneAction.loopCount = 1;
		boneAction.actionTime = 2;
		mixer = new THREE.AnimationMixer(cat_mesh);
		mixer.addAction(new THREE.AnimationAction(clipMorpher));
		mixer.addAction(boneAction);
		mixers.push(mixer);
	}
	display() {
		this.ms_Water.render();
		this.ms_Renderer.render(this.ms_Scene, this.ms_Camera);
	}
	initialZoom() {
		let fov = this.ms_Camera.fov;
		let zoom = this.ms_Camera.zoom;
		const inc = 0.01;
		if (zoom < 2) {
			this.ms_Camera.fov = fov * zoom;
			this.ms_Camera.updateProjectionMatrix();
			zoom += inc;
		}
	}
	update() {
		this.ms_Water.material.uniforms.time.value += 1.0 / 60.0;
		var delta = clock.getDelta();

		if (mixers.length) {
			for (var i = 0; i < mixers.length; i++) {
				mixers[i].update(delta);
			}
		}
		if (ready) this.initialZoom();
		this.ms_Controls.update();
		this.display();
	}
	handleButton() {
		pushed = true;
		for (var i = 0; i < mixers.length; i++) {
			for (var y = 0; y < mixers[i].actions.length; y++) {
				mixers[i].actions[y].enabled = true;
				mixers[i].actions[y].loopCount = 0;
				mixers[i].actions[y].loop = THREE.LoopOnce;
				mixers[i].actions[y].actionTime = 0;
			}
		}
	}
	handleKeyDown() {
		document.addEventListener('keydown', e => {
			switch (e.keyCode) {
				case 69:
				case 87:
				case 81:
					this.handleButton();
					break;
				default:
					break;
			}
		});
	}
	resize(inWidth, inHeight) {
		this.ms_Camera.aspect = inWidth / inHeight;
		this.ms_Camera.updateProjectionMatrix();
		this.ms_Renderer.setSize(inWidth, inHeight);
		this.ms_Canvas.html(this.ms_Renderer.domElement);
		this.display();
	}
};

const DEMO = new Demo();

function mainLoop() {
	requestAnimationFrame(mainLoop);
	DEMO.update();
}

function onDocumentMouseDown(event) {
	event.preventDefault();

	var mouse = new THREE.Vector2(event.clientX / window.innerWidth * 2 - 1, -(event.clientY / window.innerHeight) * 2 + 1);

	DEMO.ms_Raycaster.setFromCamera(mouse, DEMO.ms_Camera);
	var intersects = DEMO.ms_Raycaster.intersectObjects(DEMO.ms_Clickable);

	if (intersects.length > 0) {
		intersects[0].object.callback();
	}
}

$(function () {
	WINDOW.initialize();

	document.addEventListener('click', onDocumentMouseDown, false);

	var parameters = {
		alea: RAND_MT,
		generator: PN_GENERATOR,
		width: 10000,
		height: 9000,
		widthSegments: 80,
		heightSegments: 80,
		depth: 3000,
		param: 9.2,
		filterparam: .1,
		filter: [CIRCLE_FILTER],
		postgen: [MOUNTAINS_COLORS],
		effect: [DESTRUCTURE_EFFECT]
	};

	DEMO.initialize('canvas-3d', parameters);

	WINDOW.resizeCallback = function (inWidth, inHeight) {
		DEMO.resize(inWidth, inHeight);
	};
	DEMO.resize(WINDOW.ms_Width, WINDOW.ms_Height);

	mainLoop();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxZQUFZLENBQUM7O0FBRWIsSUFBSSxTQUFTO0lBQUUsT0FBTyxHQUFHLEVBQUU7SUFBRSxNQUFNLEdBQUcsRUFBRTtJQUFFLE1BQU0sR0FBRyxLQUFLLENBQUM7QUFDekQsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDOUIsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ2xCLE1BQU0sSUFBSSxDQUFDO0FBQ1YsWUFBVyxHQUFHO0FBQ2IsTUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDdEIsTUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDeEIsTUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDdEIsTUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDckIsTUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDeEIsTUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDckIsTUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDekIsTUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7RUFDdkI7QUFDRCxPQUFNLEdBQUc7QUFDRixNQUFJO0FBQ0EsT0FBSSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQyxVQUFPLENBQUMsQ0FBRSxNQUFNLENBQUMscUJBQXFCLEtBQUssT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLENBQUEsQUFBQyxDQUFDO0dBQ3ZILENBQ0QsT0FBTSxDQUFDLEVBQUU7QUFDTCxVQUFPLEtBQUssQ0FBQztHQUNkO0VBQ1I7QUFDRixXQUFVLENBQUMsVUFBVSxFQUFF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QUFZLENBQUUsQ0FBQzs7QUFFekUsS0FBSSxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUN2QixZQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0VBQ25DO0NBQ0o7O0FBRUQsQ0FBQyxDQUFDLFlBQVc7QUFDWixPQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRXBCLFNBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLENBQUM7O0FBRS9ELEtBQUksVUFBVSxHQUFHO0FBQ2hCLE1BQUksRUFBRSxPQUFPO0FBQ2IsV0FBUyxFQUFFLFlBQVk7QUFDdkIsT0FBSyxFQUFFLEtBQUs7QUFDWixRQUFNLEVBQUUsSUFBSTtBQUNaLGVBQWEsRUFBRSxFQUFFO0FBQ2pCLGdCQUFjLEVBQUUsRUFBRTtBQUNsQixPQUFLLEVBQUUsSUFBSTtBQUNYLE9BQUssRUFBRSxHQUFHO0FBQ1YsYUFBVyxFQUFFLEVBQUU7QUFDZixRQUFNLEVBQUUsQ0FBRSxhQUFhLENBQUU7QUFDekIsU0FBTyxFQUFFLENBQUUsZ0JBQWdCLENBQUU7QUFDN0IsUUFBTSxFQUFFLENBQUUsa0JBQWtCLENBQUU7RUFDOUIsQ0FBQzs7QUFFRixLQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQzs7QUFFekMsT0FBTSxDQUFDLGNBQWMsR0FBRyxVQUFTLE9BQU8sRUFBRSxRQUFRLEVBQUU7QUFBRSxNQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztFQUFFLENBQUM7QUFDeEYsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFL0MsU0FBUSxFQUFFLENBQUM7Q0FDWCxDQUFDLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmxldCBhbmltYXRpb24sIGhlbHBlcnMgPSBbXSwgbWl4ZXJzID0gW10sIHB1c2hlZCA9IGZhbHNlO1xubGV0IGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7XG5sZXQgcmVhZHkgPSBmYWxzZTtcbmNsYXNzIERlbW8ge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLm1zX0NhbnZhcyA9IG51bGw7XG5cdFx0dGhpcy5tc19SZW5kZXJlciA9IG51bGw7XG5cdFx0dGhpcy5tc19DYW1lcmEgPSBudWxsO1xuXHRcdHRoaXMubXNfU2NlbmUgPSBudWxsO1xuXHRcdHRoaXMubXNfQ29udHJvbHMgPSBudWxsO1xuXHRcdHRoaXMubXNfV2F0ZXIgPSBudWxsO1xuXHRcdHRoaXMubXNfUmF5Y2FzdGVyID0gbnVsbDtcblx0XHR0aGlzLm1zX0NsaWNrYWJsZSA9IFtdO1xuXHR9XG5cdGVuYWJsZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBhQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICByZXR1cm4gISEgd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiAoYUNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGFDYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJykpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gIH1cblx0aW5pdGlhbGl6ZShpbklkQ2FudmFzLCBpblBhcmFtZXRlcnMpIHtcblx0XHR0aGlzLm1zX0NhbnZhcyA9ICQoJyMnK2luSWRDYW52YXMpO1xuXHRcdFxuXHRcdC8vIEluaXRpYWxpemUgUmVuZGVyZXIsIENhbWVyYSwgUHJvamVjdG9yIGFuZCBTY2VuZVxuXHRcdHRoaXMubXNfUmVuZGVyZXIgPSB0aGlzLmVuYWJsZSA/IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlIH0pIDogbmV3IFRIUkVFLkNhbnZhc1JlbmRlcmVyKCk7XG5cdFx0dGhpcy5tc19DYW52YXMuaHRtbCh0aGlzLm1zX1JlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXHRcdHRoaXMubXNfU2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblx0XHRcblx0XHR0aGlzLm1zX0NhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg1NS4wLCBXSU5ET1cubXNfV2lkdGggLyBXSU5ET1cubXNfSGVpZ2h0LCAwLjUsIDMwMDAwMDApO1xuXHRcdHRoaXMubXNfQ2FtZXJhLnBvc2l0aW9uLnNldCgwLCAtTWF0aC5tYXgoaW5QYXJhbWV0ZXJzLndpZHRoICogMS41LCBpblBhcmFtZXRlcnMuaGVpZ2h0KSAvIDgsIGluUGFyYW1ldGVycy5oZWlnaHQpO1xuXHRcdHRoaXMubXNfQ2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG5cblx0XHR0aGlzLm1zX1JheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcblx0XHRcblx0XHQvLyBJbml0aWFsaXplIE9yYml0IGNvbnRyb2xcdFx0XG5cdFx0dGhpcy5tc19Db250cm9scyA9IG5ldyBUSFJFRS5PcmJpdENvbnRyb2xzKHRoaXMubXNfQ2FtZXJhLCB0aGlzLm1zX1JlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXHRcdHRoaXMubXNfQ29udHJvbHMudXNlclBhbiA9IGZhbHNlO1xuXHRcdHRoaXMubXNfQ29udHJvbHMudXNlclBhblNwZWVkID0gMC4wO1xuXHRcdHRoaXMubXNfQ29udHJvbHMubWF4RGlzdGFuY2UgPSA0MDAwLjA7XG5cdFx0dGhpcy5tc19Db250cm9scy5lbmFibGVLZXlzID0gZmFsc2U7XG5cdFx0dGhpcy5tc19Db250cm9scy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSSAqIC40OTU7XG5cdFxuXHRcdC8vIEFkZCBsaWdodFxuXG5cdFx0dmFyIGFtYmllbnQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KCAweDg4ODg4OCk7XG5cdFx0dGhpcy5tc19TY2VuZS5hZGQoYW1iaWVudCk7XG5cdFx0Ly9MZWZ0IExpZ2h0XG5cdFx0dmFyIGRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweDg4ODg4OCwgLjkpO1xuXHRcdGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uc2V0KC02MDAsIDMwMCwgNjAwKTtcblx0XHR0aGlzLm1zX1NjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0KTtcblx0XHQvL1JpZ2h0IGxpZ2h0XG5cdFx0dmFyIGRpcmVjdGlvbmFsTGlnaHQyID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHg4ODg4ODgsIC44KTtcblx0XHRkaXJlY3Rpb25hbExpZ2h0Mi5wb3NpdGlvbi5zZXQoNjAwLCA4MDAsIDYwMCk7XG5cdFx0dGhpcy5tc19TY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodDIpO1xuXHRcdC8vQm90dG9tIExpZ2h0XG5cdFx0dmFyIGRpcmVjdGlvbmFsTGlnaHQzID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHg4ODg4ODgsIC4xNSk7XG5cdFx0ZGlyZWN0aW9uYWxMaWdodDMucG9zaXRpb24uc2V0KDAsIDAsIDEwMDApO1xuXHRcdHRoaXMubXNfU2NlbmUuYWRkKGRpcmVjdGlvbmFsTGlnaHQzKTtcblx0XHQvL0JhY2sgTGlnaHRcblx0XHR2YXIgZGlyZWN0aW9uYWxMaWdodDQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweDc3RDBGRiwgLjUpO1xuXHRcdGRpcmVjdGlvbmFsTGlnaHQ0LnBvc2l0aW9uLnNldCgwLCA2MDAsIC02MDApO1xuXHRcdHRoaXMubXNfU2NlbmUuYWRkKGRpcmVjdGlvbmFsTGlnaHQ0KTtcblx0XHRcblx0XHQvLyBDcmVhdGUgdGVycmFpblxuXHRcdHRoaXMubG9hZFRlcnJhaW4oaW5QYXJhbWV0ZXJzKTtcblx0XHRcblx0XHQvLyBMb2FkIHRleHR1cmVzXHRcdFxuXHRcdHZhciB3YXRlck5vcm1hbHMgPSBuZXcgVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSgnLi4vYXNzZXRzL2ltZy93YXRlcm5vcm1hbHMuanBnJyk7XG5cdFx0d2F0ZXJOb3JtYWxzLndyYXBTID0gd2F0ZXJOb3JtYWxzLndyYXBUID0gVEhSRUUuU3BoZXJpY2FsUmVmbGVjdGlvbk1hcHBpbmc7IFxuXHRcdFxuXHRcdC8vIENyZWF0ZSB0aGUgd2F0ZXIgZWZmZWN0XG5cdFx0dGhpcy5tc19XYXRlciA9IG5ldyBUSFJFRS5XYXRlcih0aGlzLm1zX1JlbmRlcmVyLCB0aGlzLm1zX0NhbWVyYSwgdGhpcy5tc19TY2VuZSwge1xuXHRcdFx0dGV4dHVyZVdpZHRoOiA1MTIsIFxuXHRcdFx0dGV4dHVyZUhlaWdodDogNTEyLFxuXHRcdFx0d2F0ZXJOb3JtYWxzOiB3YXRlck5vcm1hbHMsXG5cdFx0XHRhbHBoYTogXHQxLjAsXG5cdFx0XHRzdW5EaXJlY3Rpb246IGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24ubm9ybWFsaXplKCksXG5cdFx0XHRzdW5Db2xvcjogMHhGRkZGRkYsXG5cdFx0XHR3YXRlckNvbG9yOiAweDhGODFBMSxcblx0XHRcdGRpc3RvcnRpb25TY2FsZTogMjAuMFxuXHRcdH0pO1xuXHRcdHZhciBhTWVzaE1pcnJvciA9IG5ldyBUSFJFRS5NZXNoKFxuXHRcdFx0bmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoaW5QYXJhbWV0ZXJzLndpZHRoICogNTAwLCBpblBhcmFtZXRlcnMuaGVpZ2h0ICogNTAwLCAxMCwgMTApLCBcblx0XHRcdHRoaXMubXNfV2F0ZXIubWF0ZXJpYWxcblx0XHQpO1xuXHRcdGFNZXNoTWlycm9yLmFkZCh0aGlzLm1zX1dhdGVyKTtcblx0XHRhTWVzaE1pcnJvci5yb3RhdGlvbi54ID0gLSBNYXRoLlBJICogMC41O1xuXHRcdHRoaXMubXNfU2NlbmUuYWRkKGFNZXNoTWlycm9yKTtcblx0XG5cdFx0Ly9Mb2FkIG9iamVjdHNcdFxuXHRcdHRoaXMubG9hZFNreUJveCgpO1xuXHRcdHRoaXMubG9hZEdsYWNpZXJzKCk7XG5cdFx0dGhpcy5sb2FkSWNlKCk7XG5cdFx0dGhpcy5sb2FkQ2F0KCk7XG5cblx0XHQvL0xpc3RlbiBmb3IgdHJpZ2dlclxuXHRcdGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0cmlnZ2VyJyk7XG5cdFx0W10uc2xpY2UuY2FsbChidXR0b25zKS5mb3JFYWNoKCBidXR0b24gPT4ge1xuXHRcdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHR0aGlzLmhhbmRsZUJ1dHRvbigpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0dGhpcy5oYW5kbGVLZXlEb3duKCk7XG5cblx0XHQvL0F1ZGlvXG5cdFx0dmFyIGF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcblx0ICB2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG5cdCAgc291cmNlLnNyYyA9ICdhc3NldHMvc291bmRzL3NsZWVwLm1wMyc7XG5cdCAgYXVkaW8ubG9vcCA9IHRydWU7XG5cdCAgYXVkaW8uYXBwZW5kQ2hpbGQoc291cmNlKTtcblx0ICAvLyBhdWRpby5wbGF5KCk7XG5cblx0ICAvL2FsbG93IHpvb21cblx0ICBzZXRUaW1lb3V0KCgpPT57XG5cdCAgXHRyZWFkeSA9IHRydWU7XG5cdCAgfSwgMTAwMDApO1xuXHR9XG5cdGxvYWRTa3lCb3goKSB7XG5cdFx0dmFyIHNreVRleHR1cmUgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCdhc3NldHMvaW1nL2dyYWRpZW50XzAzLmpwZycpO1xuXHRcdC8vIHNreVRleHR1cmUud3JhcFMgPSBza3lUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cblx0XHQvLyB2YXIgYVNreUJveE1hdGVyaWFsID0gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtcblx0XHQvLyAgIGZyYWdtZW50U2hhZGVyOiBhU2hhZGVyLmZyYWdtZW50U2hhZGVyLFxuXHRcdC8vICAgdmVydGV4U2hhZGVyOiBhU2hhZGVyLnZlcnRleFNoYWRlcixcblx0XHQvLyAgIHVuaWZvcm1zOiBhU2hhZGVyLnVuaWZvcm1zLFxuXHRcdC8vICAgZGVwdGhXcml0ZTogZmFsc2UsXG5cdFx0Ly8gICBzaWRlOiBUSFJFRS5CYWNrU2lkZVxuXHRcdC8vIH0pO1xuXG5cdFx0dmFyIGFTa3lib3ggPSBuZXcgVEhSRUUuTWVzaChcblx0XHQgIG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgxMDAwMCwgMzIsIDMyKSxcblx0XHQgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7XG5cdFx0ICBcdFx0bWFwOiBza3lUZXh0dXJlLFxuXHRcdFx0XHRcdHNpZGU6IFRIUkVFLkJhY2tTaWRlLFxuXHRcdFx0XHRcdHZlcnRleENvbG9yczogVEhSRUUuRmFjZUNvbG9ycyxcblx0XHRcdFx0XHRzaGFkaW5nOiBUSFJFRS5TbW9vdGhTaGFkaW5nLFxuXHRcdFx0XHR9KVxuXHRcdCk7XG5cdFx0XG5cdFx0dGhpcy5tc19TY2VuZS5hZGQoYVNreWJveCk7XG5cdH1cblx0bG9hZFRlcnJhaW4oaW5QYXJhbWV0ZXJzKSB7XG5cdFx0dmFyIHRlcnJhaW5HZW8gPSBURVJSQUlOR0VOLkdldChpblBhcmFtZXRlcnMpO1xuXHRcdHZhciBpY2VUZXh0dXJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSgnYXNzZXRzL2ltZy90ZXh0dXJlXzAwMS5qcGcnKTtcblx0XHR2YXIgdGVycmFpbk1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsgbWFwOiBpY2VUZXh0dXJlLCBzaGFkaW5nOiBUSFJFRS5GbGF0U2hhZGluZywgc2lkZTogVEhSRUUuRG91YmxlU2lkZSB9KTtcblx0XHR0ZXJyYWluTWF0ZXJpYWwuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoIDB4Q0NDQ0VFICk7XG5cdFx0dmFyIHRlcnJhaW4gPSBuZXcgVEhSRUUuTWVzaCh0ZXJyYWluR2VvLCB0ZXJyYWluTWF0ZXJpYWwpO1xuXHRcdHRlcnJhaW4ucG9zaXRpb24ueSA9IC0gaW5QYXJhbWV0ZXJzLmRlcHRoICogMC41O1xuXHRcdHRlcnJhaW4ucG9zaXRpb24ueiA9IC00MDAwO1xuXHRcdHRoaXMubXNfU2NlbmUuYWRkKHRlcnJhaW4pO1xuXHR9XG5cdGxvYWRHbGFjaWVycygpIHtcblx0XHR2YXIgb2JqTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuXHRcdHZhciBtc19TY2VuZSA9IHRoaXMubXNfU2NlbmU7XG5cdFx0dmFyIGljZVRleHR1cmUgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCdhc3NldHMvaW1nL3RleHR1cmVfMDAxLmpwZycpO1xuXHRcdG9iakxvYWRlci5sb2FkKCdhc3NldHMvbGFuZHNjYXBlX2Fzc2V0cy9nbGFjaWVyXzAxLm9iaicsIGZ1bmN0aW9uKGdsYWNpZXIpIHtcblxuXHRcdFx0XHQvL2xvYWQgaWNlIHRleHR1cmVcblx0XHRcdFx0Zm9yICh2YXIgaT0wOyBpPGdsYWNpZXIuY2hpbGRyZW4ubGVuZ3RoO2krKyApe1xuXHRcdFx0XHRcdGdsYWNpZXIuY2hpbGRyZW5baV0ubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe1xuXHRcdFx0ICBcdFx0bWFwOiBpY2VUZXh0dXJlLFxuXHRcdFx0ICBcdFx0c3BlY3VsYXJNYXA6IGljZVRleHR1cmUsXG5cdFx0XHRcdFx0XHRzaGFkaW5nOiBUSFJFRS5TbW9vdGhTaGFkaW5nLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Z2xhY2llci5wb3NpdGlvbi56ID0gMTAwMDtcblx0XHRcdFx0Z2xhY2llci5wb3NpdGlvbi54ID0gMjAwO1xuXHRcdFx0XHRnbGFjaWVyLnNjYWxlLnNldCguMSwuMSwuMSk7XG5cdFx0XHRcdG1zX1NjZW5lLmFkZChnbGFjaWVyKTtcblx0XHR9KTtcblx0XHRvYmpMb2FkZXIubG9hZCgnYXNzZXRzL2xhbmRzY2FwZV9hc3NldHMvZ2xhY2llcl8wMi5vYmonLCBmdW5jdGlvbihnbGFjaWVyKSB7XG5cblx0XHRcdFx0Ly9sb2FkIGljZSB0ZXh0dXJlXG5cdFx0XHRcdGZvciAodmFyIGk9MDsgaTxnbGFjaWVyLmNoaWxkcmVuLmxlbmd0aDtpKysgKXtcblx0XHRcdFx0XHRnbGFjaWVyLmNoaWxkcmVuW2ldLm1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcblx0XHRcdCAgXHRcdG1hcDogaWNlVGV4dHVyZSxcblx0XHRcdCAgXHRcdHNwZWN1bGFyTWFwOiBpY2VUZXh0dXJlLFxuXHRcdFx0XHRcdFx0c2hhZGluZzogVEhSRUUuU21vb3RoU2hhZGluZyxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGdsYWNpZXIucG9zaXRpb24ueiA9IDkwMDtcblx0XHRcdFx0Z2xhY2llci5wb3NpdGlvbi54ID0gLTEwMDA7XG5cdFx0XHRcdGdsYWNpZXIuc2NhbGUuc2V0KC4yLC4yLC4yKTtcblx0XHRcdFx0bXNfU2NlbmUuYWRkKGdsYWNpZXIpO1xuXHRcdH0pO1xuXHR9XG5cdGxvYWRJY2UoKSB7XG5cdFx0Y29uc3Qgb2JqTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuXHRcdGNvbnN0IG1zX1NjZW5lID0gdGhpcy5tc19TY2VuZTtcblx0XHRjb25zdCBpY2VUZXh0dXJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSgnYXNzZXRzL2ltZy90ZXh0dXJlXzAwMS5qcGcnKTtcblx0XHRvYmpMb2FkZXIubG9hZCgnYXNzZXRzL2xhbmRzY2FwZV9hc3NldHMvZmxvZV8wMS5vYmonLCBmdW5jdGlvbihnbGFjaWVyKSB7XG5cdFx0XHRcdC8vbG9hZCBpY2UgdGV4dHVyZVxuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8Z2xhY2llci5jaGlsZHJlbi5sZW5ndGg7aSsrICl7XG5cdFx0XHRcdFx0Z2xhY2llci5jaGlsZHJlbltpXS5tYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7XG5cdFx0XHQgIFx0XHRtYXA6IGljZVRleHR1cmUsXG5cdFx0XHQgIFx0XHRzcGVjdWxhck1hcDogaWNlVGV4dHVyZSxcblx0XHRcdFx0XHRcdHNoYWRpbmc6IFRIUkVFLlNtb290aFNoYWRpbmcsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnbGFjaWVyLnBvc2l0aW9uLnogPSAxMDAwO1xuXHRcdFx0XHRnbGFjaWVyLnBvc2l0aW9uLnggPSAwO1xuXHRcdFx0XHQvLyBnbGFjaWVyLnNjYWxlLnNldCguMSwuMSwuMSk7XG5cdFx0XHRcdG1zX1NjZW5lLmFkZChnbGFjaWVyKTtcblx0XHR9KTtcblx0fVxuXHRsb2FkQ2F0KCkge1xuXHRcdHZhciBqc29uTG9hZGVyID0gbmV3IFRIUkVFLkpTT05Mb2FkZXIoKTtcblx0XHR2YXIgbXNfU2NlbmUgPSB0aGlzLm1zX1NjZW5lO1xuXHRcdHZhciBsb2FkQW5pbWF0aW9uID0gdGhpcy5sb2FkQW5pbWF0aW9uO1xuXG5cdFx0anNvbkxvYWRlci5sb2FkKCBcImFzc2V0cy9qcy9jYXRfYW5pbWF0ZWQuanNcIiwgZnVuY3Rpb24gKCBnZW9tZXRyeSwgbWF0ZXJpYWxzICkge1xuXHRcdFx0bG9hZEFuaW1hdGlvbiggZ2VvbWV0cnksIG1hdGVyaWFscywgMCwgMTAsIDEwMDAsIDE1LCBtc19TY2VuZSwgXCJhc3NldHMvaW1nL2NhdF9kaWZmdXNlLmpwZ1wiICk7XG5cdFx0fSk7XG5cdFx0anNvbkxvYWRlci5sb2FkKCBcImFzc2V0cy9qcy9jYXRfYW5pbWF0ZWRfaGF0LmpzXCIsIGZ1bmN0aW9uICggZ2VvbWV0cnksIG1hdGVyaWFscyApIHtcblx0XHRcdGxvYWRBbmltYXRpb24oIGdlb21ldHJ5LCBtYXRlcmlhbHMsIDAsIDEwLCAxMDAwLCAxNSwgbXNfU2NlbmUsIFwiYXNzZXRzL2ltZy9oYXRfZGlmZnVzZS5qcGdcIiApO1xuXHRcdH0pO1xuXHR9XG5cdGxvYWRBbmltYXRpb24oIGdlb21ldHJ5LCBtYXRlcmlhbHMsIHgsIHksIHosIHMsIHNjZW5lLCB0ZXh0dXJlICkge1xuXHRcdGxldCBtaXhlcjtcblx0XHRjb25zdCBvYmpUZXh0dXJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSh0ZXh0dXJlKTtcblx0XHRnZW9tZXRyeS5jb21wdXRlRmFjZU5vcm1hbHMoKTtcbiAgXHRnZW9tZXRyeS5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuICBcdGdlb21ldHJ5LmR5bmFtaWMgPSB0cnVlXG5cdFx0Z2VvbWV0cnkuX19kaXJ0eVZlcnRpY2VzID0gdHJ1ZTtcblx0XHRnZW9tZXRyeS5fX2RpcnR5Tm9ybWFscyA9IHRydWU7XG5cblx0XHQvL0ZsaXAgbm9ybWFsc1xuXHRcdGZvcih2YXIgaSA9IDA7IGk8Z2VvbWV0cnkuZmFjZXMubGVuZ3RoOyBpKyspIHtcblx0XHQgICAgZ2VvbWV0cnkuZmFjZXNbaV0ubm9ybWFsLnggPSAtMSpnZW9tZXRyeS5mYWNlc1tpXS5ub3JtYWwueDtcblx0XHQgICAgZ2VvbWV0cnkuZmFjZXNbaV0ubm9ybWFsLnkgPSAtMSpnZW9tZXRyeS5mYWNlc1tpXS5ub3JtYWwueTtcblx0XHQgICAgZ2VvbWV0cnkuZmFjZXNbaV0ubm9ybWFsLnogPSAtMSpnZW9tZXRyeS5mYWNlc1tpXS5ub3JtYWwuejtcblx0XHR9XG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBtYXRlcmlhbHMubGVuZ3RoOyBpICsrICkge1xuXHRcdFx0bGV0IG0gPSBtYXRlcmlhbHNbaV07XG5cdFx0XHRtLnNraW5uaW5nID0gdHJ1ZTtcblx0XHRcdG0uc2hhZGluZyA9IFRIUkVFLlNtb290aFNoYWRpbmc7XG5cdFx0XHRtLnNoaW5pbmVzcyA9IDEwMDtcblx0XHRcdG0ubWFwID0gb2JqVGV4dHVyZTtcblx0XHR9XG5cdFx0XG5cdFx0bGV0IGNhdF9tZXNoID0gbmV3IFRIUkVFLlNraW5uZWRNZXNoKCBnZW9tZXRyeSwgbmV3IFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwoIG1hdGVyaWFscyApICk7XG5cdFx0Y2F0X21lc2gucG9zaXRpb24uc2V0KCB4LCB5LCB6ICk7XG5cdFx0Y2F0X21lc2guc2NhbGUuc2V0KCBzLCBzLCBzICk7XG5cdFx0Y2F0X21lc2guY2FzdFNoYWRvdyA9IHRydWU7XG5cdFx0Y2F0X21lc2gucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG5cdFx0c2NlbmUuYWRkKCBjYXRfbWVzaCApO1xuXG5cdFx0bGV0IGNsaXBNb3JwaGVyID0gVEhSRUUuQW5pbWF0aW9uQ2xpcC5DcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZSggJ0FjdGlvbicsIGNhdF9tZXNoLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cywgMyApO1xuXHRcdGxldCBjbGlwQm9uZXMgPSBnZW9tZXRyeS5hbmltYXRpb25zWzBdO1xuXHRcdGxldCBib25lQWN0aW9uID0gbmV3IFRIUkVFLkFuaW1hdGlvbkFjdGlvbiggY2xpcEJvbmVzICk7XG5cdFx0Ym9uZUFjdGlvbi5sb29wID0gVEhSRUUuTG9vcE9uY2U7XG5cdFx0Ym9uZUFjdGlvbi5sb29wQ291bnQgPSAxO1xuXHRcdGJvbmVBY3Rpb24uYWN0aW9uVGltZSA9IDI7XG5cdFx0bWl4ZXIgPSBuZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIoIGNhdF9tZXNoICk7XG5cdFx0bWl4ZXIuYWRkQWN0aW9uKCBuZXcgVEhSRUUuQW5pbWF0aW9uQWN0aW9uKCBjbGlwTW9ycGhlciApICk7XG5cdFx0bWl4ZXIuYWRkQWN0aW9uKCBib25lQWN0aW9uICk7XG5cdFx0bWl4ZXJzLnB1c2gobWl4ZXIpO1xuXHR9XG5cdGRpc3BsYXkoKSB7XG5cdFx0dGhpcy5tc19XYXRlci5yZW5kZXIoKTtcblx0XHR0aGlzLm1zX1JlbmRlcmVyLnJlbmRlcih0aGlzLm1zX1NjZW5lLCB0aGlzLm1zX0NhbWVyYSk7XG5cdH1cblx0aW5pdGlhbFpvb20oKSB7XG5cdFx0bGV0IGZvdiA9IHRoaXMubXNfQ2FtZXJhLmZvdjtcblx0XHRsZXQgem9vbSA9IHRoaXMubXNfQ2FtZXJhLnpvb207XG5cdFx0Y29uc3QgaW5jID0gMC4wMTtcblx0XHRpZiAoem9vbSA8IDIpIHtcblx0XHRcdHRoaXMubXNfQ2FtZXJhLmZvdiA9IGZvdiAqIHpvb207XG5cdCAgICB0aGlzLm1zX0NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdCAgICB6b29tICs9IGluYztcblx0XHR9XG5cdH1cblx0dXBkYXRlKCkge1xuXHRcdHRoaXMubXNfV2F0ZXIubWF0ZXJpYWwudW5pZm9ybXMudGltZS52YWx1ZSArPSAxLjAgLyA2MC4wO1xuXHRcdHZhciBkZWx0YSA9IGNsb2NrLmdldERlbHRhKCk7XG5cblx0XHRpZiggbWl4ZXJzLmxlbmd0aCApIHtcblx0XHRcdGZvciAodmFyIGk9MDsgaTxtaXhlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bWl4ZXJzW2ldLnVwZGF0ZShkZWx0YSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChyZWFkeSkgdGhpcy5pbml0aWFsWm9vbSgpO1xuXHRcdHRoaXMubXNfQ29udHJvbHMudXBkYXRlKCk7XG5cdFx0dGhpcy5kaXNwbGF5KCk7XG5cdH1cblx0aGFuZGxlQnV0dG9uKCkge1xuXHRcdHB1c2hlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaT0wOyBpPG1peGVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Zm9yICh2YXIgeT0wO3k8bWl4ZXJzW2ldLmFjdGlvbnMubGVuZ3RoO3krKykge1xuXHRcdFx0XHRtaXhlcnNbaV0uYWN0aW9uc1t5XS5lbmFibGVkID0gdHJ1ZTtcblx0XHRcdFx0bWl4ZXJzW2ldLmFjdGlvbnNbeV0ubG9vcENvdW50ID0gMDtcblx0XHRcdFx0bWl4ZXJzW2ldLmFjdGlvbnNbeV0ubG9vcCA9IFRIUkVFLkxvb3BPbmNlO1xuXHRcdFx0XHRtaXhlcnNbaV0uYWN0aW9uc1t5XS5hY3Rpb25UaW1lID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aGFuZGxlS2V5RG93bigpIHtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XG5cdFx0XHRzd2l0Y2ggKGUua2V5Q29kZSkge1xuXHRcdFx0XHRjYXNlIDY5OlxuXHRcdFx0XHRjYXNlIDg3OlxuXHRcdFx0XHRjYXNlIDgxOlxuXHRcdFx0XHRcdHRoaXMuaGFuZGxlQnV0dG9uKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0cmVzaXplKGluV2lkdGgsIGluSGVpZ2h0KSB7XG5cdFx0dGhpcy5tc19DYW1lcmEuYXNwZWN0ID0gIGluV2lkdGggLyBpbkhlaWdodDtcblx0XHR0aGlzLm1zX0NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdFx0dGhpcy5tc19SZW5kZXJlci5zZXRTaXplKGluV2lkdGgsIGluSGVpZ2h0KTtcblx0XHR0aGlzLm1zX0NhbnZhcy5odG1sKHRoaXMubXNfUmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cdFx0dGhpcy5kaXNwbGF5KCk7XG5cdH1cbn07XG5cbmNvbnN0IERFTU8gPSBuZXcgRGVtbztcblxuZnVuY3Rpb24gbWFpbkxvb3AoKSB7XG5cdHJlcXVlc3RBbmltYXRpb25GcmFtZShtYWluTG9vcCk7XG5cdERFTU8udXBkYXRlKCk7XG59XG5cbmZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZURvd24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFxuICAgIHZhciBtb3VzZSA9IG5ldyBUSFJFRS5WZWN0b3IyKFxuICAgICAgICAoIGV2ZW50LmNsaWVudFggLyB3aW5kb3cuaW5uZXJXaWR0aCApICogMiAtIDEsIFxuICAgICAgICAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDEgKTtcblxuICAgIERFTU8ubXNfUmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoIG1vdXNlLCBERU1PLm1zX0NhbWVyYSApO1xuICAgIHZhciBpbnRlcnNlY3RzID0gREVNTy5tc19SYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyggREVNTy5tc19DbGlja2FibGUgKTsgICAgXG5cbiAgICBpZiAoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7ICBcbiAgICAgICAgaW50ZXJzZWN0c1swXS5vYmplY3QuY2FsbGJhY2soKTtcbiAgICB9ICAgICAgICAgICAgICAgIFxufVxuXG4kKGZ1bmN0aW9uKCkge1xuXHRXSU5ET1cuaW5pdGlhbGl6ZSgpO1xuXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Eb2N1bWVudE1vdXNlRG93biwgZmFsc2UpO1xuXHRcblx0dmFyIHBhcmFtZXRlcnMgPSB7XG5cdFx0YWxlYTogUkFORF9NVCxcblx0XHRnZW5lcmF0b3I6IFBOX0dFTkVSQVRPUixcblx0XHR3aWR0aDogMTAwMDAsXG5cdFx0aGVpZ2h0OiA5MDAwLFxuXHRcdHdpZHRoU2VnbWVudHM6IDgwLFxuXHRcdGhlaWdodFNlZ21lbnRzOiA4MCxcblx0XHRkZXB0aDogMzAwMCxcblx0XHRwYXJhbTogOS4yLFxuXHRcdGZpbHRlcnBhcmFtOiAuMSxcblx0XHRmaWx0ZXI6IFsgQ0lSQ0xFX0ZJTFRFUiBdLFxuXHRcdHBvc3RnZW46IFsgTU9VTlRBSU5TX0NPTE9SUyBdLFxuXHRcdGVmZmVjdDogWyBERVNUUlVDVFVSRV9FRkZFQ1QgXVxuXHR9O1xuXHRcblx0REVNTy5pbml0aWFsaXplKCdjYW52YXMtM2QnLCBwYXJhbWV0ZXJzKTtcblx0XG5cdFdJTkRPVy5yZXNpemVDYWxsYmFjayA9IGZ1bmN0aW9uKGluV2lkdGgsIGluSGVpZ2h0KSB7IERFTU8ucmVzaXplKGluV2lkdGgsIGluSGVpZ2h0KTsgfTtcblx0REVNTy5yZXNpemUoV0lORE9XLm1zX1dpZHRoLCBXSU5ET1cubXNfSGVpZ2h0KTtcblx0XG5cdG1haW5Mb29wKCk7XG59KTsiXX0=
